(function(){var e;$.setTimeout=function(e,t){return setTimeout(t,e)},$.setInterval=function(e,t){return setInterval(t,e)},$.fn.slideDuration=function(){return parseInt(this.data("duration")||"0",10)},e=function(){function e(e){var n;this.options=$.extend({},t,e),this.window=e.window,this.document=this.window.document,this.document.write($("#slides-document").text()),this.document.close(),"function"==typeof(n=this.options).beforeStart&&n.beforeStart(this),this.start()}var t,n,i,r,o;return t={useHash:!0,duration:0,slideElementStyle:"hide"},e.prototype.start=function(){var t,n;return t=function(e){return function(){var t,n,i,r,o;return e.options.useHash?(n=e.document.location.hash.replace(/^#/,""),i=/^(\d+)-(\d+)$/.exec(n),i&&(o=parseInt(i[1],10),t=parseInt(i[2],10),r=".prez-slide[data-slide='"+o+"']",t>0&&(r=r+" .prez-element[data-slide-element='"+t+"']"),$(r,e.document).length>0)?(e.changeSlideTo(o,t),!0):!1):!1}}(this),n=this.options.slideElementStyle+"-style",$(".prez-slide",this.document).each(function(e){return $(this).attr("data-slide",""+(e+1)),$(this).find(".prez-element").each(function(e){return $(this).attr("data-slide-element",""+(e+1)),$(this).addClass("hidden "+n)})}),this.startTime=Date.now(),t()||this.changeSlideTo(1),$(this.window).on("hashchange",t),$(this.document).on("keydown",e.handlers.keyDown)},e.prototype.slideStarted=function(e){var t;return this.slideStartTime=Date.now(),this.slideDuration=e.slideDuration(),this.slideDuration<=0&&(t=e.nextAll(".prez-slide").filter(function(){return $(this).slideDuration()<=0}),this.slideDuration=this.remainingPresentationSeconds()/(t.size()+1),this.slideDuration<0)?this.slideDuration=0:void 0},e.prototype.changeSlideTo=function(e,t){var n,i,r,o,s,d,l,u,a;if(null==t&&(t=0),n=$(".prez-slide[data-slide='"+e+"']",this.document),0===n.size())return!1;if(e!==this.currentSlide()&&($(".prez-slide",this.document).hide(),n.show(),this.slideStarted(n)),0===t)n.find(".prez-element").addClass("hidden").removeClass("visible");else if(this.currentElement()>t)for(r=o=d=this.currentElement(),l=t+1;l>=d?l>=o:o>=l;r=l>=d?++o:--o)n.find(".prez-element[data-slide-element='"+r+"']").addClass("hidden").removeClass("visible");else if(this.currentElement()<t)for(r=s=u=this.currentElement()+1,a=t;a>=u?a>=s:s>=a;r=a>=u?++s:--s)n.find(".prez-element[data-slide-element='"+r+"']").removeClass("hidden").addClass("visible");return"opacity"===this.options.slideElementStyle&&n.hide().show(0),"function"==typeof(i=this.options).slideChanged&&i.slideChanged(n,e,t),!0},e.prototype.currentSlide=function(){return 0===$(".prez-slide:visible",this.document).size()?null:parseInt($(".prez-slide:visible",this.document).data("slide"),10)},e.prototype.currentElement=function(){return null===this.currentSlide()?null:0===$(".prez-slide:visible .prez-element.visible",this.document).size()?0:parseInt($(".prez-slide:visible .prez-element.visible:last",this.document).data("slide-element"),10)},e.prototype.countSlideElements=function(e){var t;return t=$(".prez-slide[data-slide='"+e+"']",this.document),0===t.size()?0:t.find(".prez-element").size()},e.prototype.countSlides=function(){return $(".prez-slide",this.document).size()},e.prototype.changeSlideBy=function(e){var t,n,i,r,o,s,d;for(d=this.currentSlide(),n=this.currentElement(),o=d,r=n,t=i=1,s=Math.abs(e);s>=1?s>=i:i>=s;t=s>=1?++i:--i)e>0?r>=this.countSlideElements(o)?(o++,r=0):r++:0>=r?(o--,r=this.countSlideElements(o)):r--;return this.changeSlideTo(o,r)&&this.options.useHash?this.document.location.hash=o+"-"+r:void 0},e.prototype.nextSlide=function(){return this.changeSlideBy(1)},e.prototype.prevSlide=function(){return this.changeSlideBy(-1)},e.prototype.end=function(){return this.window.close()},e.prototype.remainingPresentationSeconds=function(){return Math.floor(this.options.duration-(Date.now()-this.startTime)/1e3)},e.prototype.remainingPresentationTime=function(){return e.secondsToTime(this.remainingPresentationSeconds(),e.timeLevels(this.options.duration))},e.prototype.remainingSlideSeconds=function(){return Math.floor(this.slideDuration-(Date.now()-this.slideStartTime)/1e3)},e.prototype.remainingSlideTime=function(){return e.secondsToTime(this.remainingSlideSeconds(),e.timeLevels(this.slideDuration))},e.timeLevels=function(e){return e>=3600?3:e>=60?2:1},e.timeToSeconds=function(e){var t,n;return n=e.split(":"),t=parseInt(n.pop()||"0",10),t+=60*parseInt(n.pop()||"0",10),t+=60*parseInt(n.pop()||"0",10)*60},e.secondsToTime=function(e,t){var n,i,r,o;return null==t&&(t=1),r=function(e,t){var n;for(n=""+e;n.length<t;)n="0"+n;return n},e=Math.floor(e),e=Math.abs(e),o=e%60,i=Math.floor(e/60)%60,n=Math.floor(e/60/60),n>0||t>=3?n+":"+r(i,2)+":"+r(o,2):i>0||2===t?i+":"+r(o,2):""+o},n=13,o=32,i=37,r=39,e.handlers={keyDown:function(t){var s,d;if(!$(t.target).is("button, input, textarea, select, option"))switch(t.which){case i:return t.preventDefault(),null!=(s=e.current)?s.prevSlide():void 0;case n:case o:case r:return t.preventDefault(),null!=(d=e.current)?d.nextSlide():void 0}},timeChange:function(){var t;if(e.current)return $(".prez-total-duration").text(e.current.remainingPresentationTime()),t=e.current.remainingPresentationSeconds(),$(".prez-total-duration").toggleClass("prez-danger-time",60>=t&&t>=0),$(".prez-total-duration").toggleClass("prez-over-time",0>t),$(".prez-current-slide-duration").text(e.current.remainingSlideTime()),t=e.current.remainingSlideSeconds(),$(".prez-current-slide-duration").toggleClass("prez-danger-time",3>=t&&t>=0),$(".prez-current-slide-duration").toggleClass("prez-over-time",0>t),Math.floor(Date.now()/250)%2===0?$(".prez-danger-time").hide():$(".prez-danger-time").show(),$(".prez-total-duration:not(.prez-danger-time)").show(),$(".prez-current-slide-duration:not(.prez-danger-time)").show()}},e}(),$(document).on("click","#new-window",function(){return e.current?void 0:$.setTimeout(1,function(e){return function(){return $(e).is(".active")?($("#new-window #launch-message").text("Launch in new window"),$("#new-window .glyphicon").addClass("glyphicon-new-window").removeClass("glyphicon-unchecked")):($("#new-window #launch-message").text("Launch in this window"),$("#new-window .glyphicon").removeClass("glyphicon-new-window").addClass("glyphicon-unchecked"))}}(this))}),$(document).on("click","#launch",function(t){var n,i;return t.preventDefault(),e.current?void 0:$("#new-window").is(".active")?(n=$("iframe")[0],n=n.contentWindow?n.contentWindow:n.contentDocument.document?n.contentDocument.document:n.contentDocument,i=new e({window:n,useHash:!1,slideElementStyle:"opacity"}),e.current=new e({duration:e.timeToSeconds($("#prez-duration").val()),window:window.open("","prez","width=640,height=480"),slideChanged:function(t,n,r){var o;return o=t.find(".prez-notes").html()||"",$("#slide-notes").html(o),$(".current-slide-number:not(select)").text(t.data("slide")),$("select.current-slide-number").val(t.data("slide")),e.handlers.timeChange(),i.changeSlideTo(n,r)},beforeStart:function(e){var t,n,i,r;for($("select.current-slide-number").empty(),r=[],t=n=1,i=e.countSlides();i>=1?i>=n:n>=i;t=i>=1?++n:--n)r.push($("select.current-slide-number").append('<option value="'+t+'">'+t+"</option>"));return r}}),$(".total-slides").text(e.current.countSlides()),$("#pre-launch").hide(),$("#post-launch").show(),$(e.current.window).bind("beforeunload",function(){return $("#post-launch").hide(),$("#pre-launch").show(),void(e.current=null)})):void $("#in-window-not-implemented-modal").modal("show")}),$(document).on("click",".next-slide",function(t){var n;return t.preventDefault(),null!=(n=e.current)?n.nextSlide():void 0}),$(document).on("click",".prev-slide",function(t){var n;return t.preventDefault(),null!=(n=e.current)?n.prevSlide():void 0}),$(document).on("click",".end-prez",function(t){var n;return t.preventDefault(),null!=(n=e.current)?n.end():void 0}),$(document).on("change","select.current-slide-number",function(){var t;return null!=(t=e.current)&&t.changeSlideTo(parseInt($(this).val(),10)),$(this).blur()}),$(window).bind("beforeunload",function(){var t;return null!=(t=e.current)?t.end():void 0}),$(document).on("keydown",e.handlers.keyDown),$.setInterval(50,e.handlers.timeChange),$(function(){return $("#in-window-not-implemented-modal").modal({show:!1})})}).call(this);